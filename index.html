<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<style> /* set the CSS */

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}

</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

<div class="container">
        <div class="navbar" id="navbar">
            <h1>CS498 - Trends in Surface Temperature</h1>
            <p>Exploring the how surface temperatures have changed over the last 150 years</p>
            <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                        <button onclick="window.location.href='about.html'" class="btn btn-info navbar-btn">About the Visualization</button>
                </div>
              </nav>
        </div>

      <div>
           <div class = "row"  style="height : 250px" >
               <div class="row col-md-4" >
                   <h1 id="title">Overview</h1>
               </div>
               <div class="col-md-8">
                   <h2 id="subtitle">Information</h3>
                   <p> This is an overview of the change in suface temperature anamolies over the course of 150 years
                   </p>
                   <p>
                       The graph below shows how global surface temperature anamolies have changed, and the
                       future slides will let you pick a certain range of latitudes around the Earth.
                   </p>
                   <p>
                     You can hover over the Annotation bubbles to see more insight about the graph.
                  </p>
               </div>
             </div>
      </div>
    </div>
      <script>
              // set the dimensions and margins of the graph
        var margin = {top:50, right: 20, bottom: 50, left: 50},
            width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        // parse the date / time
        var parseTime = d3.timeParse("%Y");

        // set the ranges
        var x = d3.scaleTime().range([0, width]);
        var y = d3.scaleLinear().range([height, 0]);

        // define the line
        var valueline = d3.line()
            .x(function(d) { return x(d.Year); })
            .y(function(d) { return y(d.Glob); });

        // append the svg obgect to the body of the page
        // appends a 'group' element to 'svg'
        // moves the 'group' element to the top left margin
        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform",
                  "translate(" + margin.left + "," + margin.top + ")");

        // Get the data
        d3.csv("SST.csv", function(error, data) {
          if (error) throw error;

          // format the data
          data.forEach(function(d) {
              d.Year = parseTime(d.Year);
              d.Glob = +d.Glob;
          });

          // Scale the range of the data
          x.domain(d3.extent(data, function(d) { return d.Year; }));
          y.domain(d3.extent(data, function(d) { return d.Glob; }));

          // Add the valueline path.
          svg.append("path")
              .data([data])
              .attr("class", "line")
              .attr("d", valueline);

          // Add the X Axis
          svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(x));
          svg.append("text")
            .attr("transform",
                  "translate(" + (width/2) + " ," +
                                 (height - margin.bottom) + 20 + ")")
            .style("text-anchor", "middle")
            .text("Year");
            // Add the Y Axis
          svg.append("g")
              .call(d3.axisLeft(y));
              // text label for the y axis
          svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0 - margin.left)
            .attr("x",0 - (height / 2))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Deviations from Average Temperature");
          svg.append("text")
              .attr("x", (width / 2))
              .attr("y", 0 - (margin.top / 2))
              .attr("text-anchor", "middle")
              .style("font-size", "16px")
              .style("text-decoration", "underline")
              .text("Global Overview of Sea Surface Temperature Change");



        });

        </script>
</body>
</html>
